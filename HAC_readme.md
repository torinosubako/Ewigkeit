# Home_Appliances_Control Manual vr.R21216

### JA:日本語資料。英語資料は日本語資料の下部に記載予定です。

### EN:Japanese materials. English materials are planned to be listed at the bottom of Japanese materials.
<br>

# 概要
これは、Web連動型家電制御デバイスシステム「Ewigkeit(エーヴィヒカイト)」で用いているデータベースシステム[**Home_Appliances_Control**]の構成と、そのキーの設定方法に関する資料です。
<br>
<br>

# 更新情報
Version 1.0 : 令和2年11月29日更新
- 初版：Anfang(Full_Version)　Build:20201124に対応。  
 
Version 1.1 : 令和2年11月29日更新  
- 第2版：Anfang(Full_Version)　Build:20201124に対応。  
　　- 初版の誤字の修正
 
Version 1.2 : 令和2年12月16日更新  
- 第3版：Anfang_wahl(Full_Version+)　Build:20201215に対応。  
　　- 照明関連の注釈事項の追加
<br>
<br>

# 構成
データベースの構成は、以下のようになっています。

### Ewigkeit/Anfang/Home_Appliances_Control-JSONModel.json
```json
{
  "Home_Appliances_Control" :{
    "Air_Con" : {	//　エアコン制御キー群
      "Mode" : {	//　動作モード指定キー
        "key" : 0
      },
      "Temp" : {	//　温度指定キー
        "key" : 25
      }, 
      "Fan" : {		//　風量指定キー
        "key" : 0
      },
      "Fragment" : {	//　エアコンのフラグメントキー
        "key" : 1
      }
    },
    "Cooling_Fan" : {	//　扇風機の制御キー群
      "Mode" : {	//　動作モード指定キー
        "key" : 0
      },
      "Fragment" : {	//　扇風機のフラグメントキー
        "key" : 1
      }
    },
    "Fragment" : {	//　更新フラグメントキー
      "key" : 1
    },
    "Light" : { 	//　照明の制御キー群
      "Mode" : {	//　電源操作キー
        "key" : 0
      },
      "Fragment" : {	//　照明のフラグメントキー
        "key" : 1
      }
    },
    "TV" : {		//　テレビの制御キー群
      "Off" : {		//　電源操作キー
        "key" : 0
      }
    }
  }
}
```

<br>
<br>

# 各キー説明・設定情報

次に、各キーと設定について説明します。


**注意:各キーには必ず<u>文字列型の数字</u>ではなく、<u>整数型の数字</u>を与えてください。** <br>
<font color="Red"><u>整数型の数字を入力しない場合、必ず動作不良を引き起こします。</u></font>


1. 更新フラグメントキー　/Fragment
    1. フラグメント　/Fragment/key  
        - 設定  
          0 : 変更なし  
          1 : 変更あり 
        - 説明  
          何らかの情報更新があったかどうかを判定するフラグメント。  
          このフラグメントが0だと、何も読まずにプロセスが終了してしまうので、各設定事項を変更した際は、必ず1をPUTすること。  
          このフラグメントが1の場合、各機器のフラグメントの読み出しが実行される。  
          各設定の読み出しと赤外線信号の送信動作が全て終了すると、デバイス側から0がPUTされ、自動的にこのフラグメントはリフレッシュされる。  
<br>

2. エアコン操作　/Air_Con
    1. フラグメント　/Air_Con/Fragment/key  
        - 設定  
          0 : 変更なし  
          1 : 変更あり 
        - 説明  
          エアコンの各種設定事項を読み出すかどうかを判定するフラグメント。  
          このフラグメントが0だと、エアコンの各種設定は読み出さずに省略してしまうので、エアコンの設定事項を変更する際は、必ず1をPUTすること。  
          このフラグメントが1の場合、エアコンの各設定事項の読み出しが実行される。  
          エアコン関連の設定の読み出しと赤外線信号の送信動作が全て終了すると、デバイス側から0がPUTされ、自動的にこのフラグメントはリフレッシュされる。  

    2. 動作モード指定キー　/Air_Con/Mode/key  
        - 設定  
          0 : 自動モード  
          1 : 冷房  
          2 : 除湿  
          3 : 暖房  
          4 : 送風  
          7 : 電源切断
        - 説明  
          エアコンの動作モードを指定するキー。  
          5と6には指定可能なモード設定は無いので注意。

    3. 温度指定キー　/Air_Con/Tenp/key  
        - 設定  
          17~30の範囲の整数 : 設定温度
        - 説明  
          エアコンの設定温度を指定するキー。

    4. 風量指定キー　/Air_Con/Fan/key  
        - 設定  
          0 : 自動モード  
          1 : 弱風  
          3 : 中風  
          5 : 強風  
        - 説明  
          エアコンの風量を指定するキー。
          2と4には指定可能な風量設定は無いので注意。  
<br>

3. 扇風機操作　/Cooling_Fan
    1. フラグメント　/Cooling_Fan/Fragment/key  
        - 設定  
          0 : 変更なし  
          1 : 変更あり
        - 説明  
          扇風機の各種設定事項を読み出すかどうかを判定するフラグメント。  
          このフラグメントが0だと、扇風機の各種設定は読み出さずに省略してしまうので、扇風機の設定事項を変更する際は、必ず1をPUTすること。  
          このフラグメントが1の場合、扇風機の各設定事項の読み出しが実行される。  
          扇風機関連の設定の読み出しと赤外線信号の送信動作が全て終了すると、デバイス側から0がPUTされ、自動的にこのフラグメントはリフレッシュされる。  


    2. 動作モード指定キー　/Cooling_Fan/Mode/key  
        - 設定  
          0 : 電源切断  
          1 : 電源投入
        - 説明  
          扇風機の動作モードを指定するキー。  
<br>

4. 照明操作　/Light
    1. フラグメント　/Light/Fragment/key  
        - 設定  
          0 : 変更なし  
          1 : 変更あり 
        - 説明  
          照明の各種設定事項を読み出すかどうかを判定するフラグメント。  
          このフラグメントが0だと、照明の各種設定は読み出さずに省略してしまうので、照明の設定事項を変更する際は、必ず1をPUTすること。  
          このフラグメントが1の場合、照明の各設定事項の読み出しが実行される。  
          照明関連の設定の読み出しと赤外線信号の送信動作が全て終了すると、デバイス側から0がPUTされ、自動的にこのフラグメントはリフレッシュされる。  


    2. 動作モード指定キー　/Light/Mode/key  
        - 設定  
          0 : 消灯  
          1 : 点灯
        - 説明  
          照明の動作モードを指定するキー。  
          現状では、点灯信号送信がかなり挙動が怪しく、使わない方が良いと思われる。  
<br>

5. テレビ操作　/TV
    1. 電源切断キー　/TV/OFF/key  
        - 設定  
          0 : 平常時  
          1 : 電源切断時 
        - 説明  
          テレビの電源を切断する命令を識別するキー。  
          このキーだけは、扇風機や照明と違い、**1の時に電源が切断**される。  
          また、このキーだけは、他のフラグメントと同じように、赤外線信号の送信動作が全て終了すると、デバイス側から0がPUTされ、自動的にこのキーはリフレッシュされる。  
          また、外出先からテレビの電源を付けるニーズはまずないであろうから、**電源OFF機能しか実装していない**。  
<br>
<br>

# キー設定の例

最後に、キーの設定についての例を示します。

1. エアコンを、設定温度25℃の暖房(風量:自動)で動作させたい場合  
    以下の全てのキーを次の様に設定してください。
    - 更新フラグメント(変更あり -> 1)  
    　/Fragment/key/ ->　1をPUT  
    - エアコンフラグメント(変更あり -> 1)   
    　/Air_Con/Fragment/key ->　1をPUT  
    - 動作モード指定(モード指定:暖房 -> 3)  
      /Air_Con/Mode/key ->　3をPUT  
    - 温度指定キー(設定温度:25℃ -> 25)  
      /Air_Con/Tenp/key   ->　25をPUT　
    - 風量指定キー(設定風量:自動 -> 0)  
      /Air_Con/Fan/key     ->　0をPUT　
<br>
<br>


2. エアコンを、設定温度25℃の暖房(風量:自動)で動作させ、かつ、照明を切りたい場合  
    以下の全てのキーを次の様に設定してください。
    - 更新フラグメント(変更あり -> 1)  
    　/Fragment/key/ ->　1をPUT
    
    ### エアコン関連  
    - エアコンフラグメント(変更あり -> 1)   
    　/Air_Con/Fragment/key ->　1をPUT  
    - 動作モード指定(モード指定:暖房 -> 3)  
      /Air_Con/Mode/key ->　3をPUT  
    - 温度指定キー(設定温度:25℃ -> 25)  
      /Air_Con/Tenp/key   ->　25をPUT　
    - 風量指定キー(設定風量:自動 -> 0)  
      /Air_Con/Fan/key     ->　0をPUT　

    ### 照明関連  
    - 照明フラグメント(変更あり -> 1)  
      /Light/Fragment/key  ->　1をPUT  
    - 照明動作モード指定(モード指定:消灯 -> 0)  
      /Light/Mode/key  ->　0をPUT  
<br>